From b66a2c2586875a334fc3f0aa35310ffd0ec6f55d Mon Sep 17 00:00:00 2001
From: Bert van Hall <bert.vanhall@avionic-design.de>
Date: Fri, 21 Apr 2017 16:26:02 +0200
Subject: [PATCH] fix unused function error when building without ACL

Since -Werror is set, building without ACL makes the then unused
is_acl_well_supported function halt the build. Guard it as it is done
with every call of it.

Signed-off-by: Bert van Hall <bert.vanhall@avionic-design.de>
Closes #119
---
 logrotate.c | 2 ++
 1 file changed, 2 insertions(+)

diff --git a/logrotate.c b/logrotate.c
index 066c4f7..b0be177 100644
--- a/logrotate.c
+++ b/logrotate.c
@@ -442,6 +442,7 @@ static int runScript(struct logInfo *log, char *logfn, char *script)
 	return rc;
 }
 
+#ifdef WITH_ACL
 static int is_acl_well_supported(int err)
 {
 	switch (err) {
@@ -454,6 +455,7 @@ static int is_acl_well_supported(int err)
 		return 1;
 	}
 }
+#endif /* WITH_ACL */
 
 static int createOutputFile(char *fileName, int flags, struct stat *sb,
 			    acl_type acl, int force_mode)
From 4c00581c83e112dc83bc55b0ed5daba2fdaf0790 Mon Sep 17 00:00:00 2001
From: Steven Williamson <steve@freeagent.com>
Date: Mon, 6 Mar 2017 12:29:22 +0000
Subject: [PATCH] Fixes GCC sentinel error.

The last argument for sentinel value functions should be a NULL pointer
not just a NULL value.  Otherwise GCC 4.x will error with "error:
missing sentinel in function call [-Werror=format=]"

Closes #108
---
 logrotate.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/logrotate.c b/logrotate.c
index b0be177..dcf1076 100644
--- a/logrotate.c
+++ b/logrotate.c
@@ -434,7 +434,7 @@ static int runScript(struct logInfo *log, char *logfn, char *script)
 				exit(1);
 			}
 		}
-		execl("/bin/sh", "sh", "-c", script, "logrotate_script", logfn, NULL);
+		execl("/bin/sh", "sh", "-c", script, "logrotate_script", logfn, (char *) NULL);
 		exit(1);
 	}
 
@@ -816,7 +816,7 @@ static int mailLog(struct logInfo *log, char *logFile, const char *mailComm,
 				exit(1);
 			}
 
-			execlp(uncompressCommand, uncompressCommand, NULL);
+			execlp(uncompressCommand, uncompressCommand, (char *) NULL);
 			exit(1);
 		}
 
